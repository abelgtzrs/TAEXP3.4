/* src/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Glassmorphism variables (editable via Profile > Edit) */
:root {
  --glass-blur: 8px; /* default blur for translucent elements */
  --glass-surface-alpha: 0.6; /* 0.0 - 1.0 alpha for widget/container backgrounds */
  --glass-tint: rgba(0, 0, 0, 0); /* overlay tint on page background */
}

/* Base style for all widgets */
.widget-container {
  background-color: rgba(23, 31, 42, var(--glass-surface-alpha, 0.6)); /* Semi-transparent dark surface */
  border: 1px solid #374151; /* gray-700, for structure */
  backdrop-filter: blur(var(--glass-blur, 8px));
  position: relative;
  box-shadow: inset 0 0 15px rgba(14, 165, 233, 0.1), 0 0 15px rgba(14, 165, 233, 0.1); /* Inner and outer glow */
  -webkit-backdrop-filter: blur(var(--glass-blur, 8px));
}

/* Lightweight glass surface utility for UI widgets */
.glass-surface {
  background-color: rgba(23, 31, 42, var(--glass-surface-alpha, 0.6));
  backdrop-filter: blur(var(--glass-blur, 8px));
  -webkit-backdrop-filter: blur(var(--glass-blur, 8px));
}

/* Global toggle: disable glass and use solid surfaces */
:root[data-glass="off"] .widget-container,
:root[data-glass="off"] .glass-surface {
  background-color: var(--color-surface);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  box-shadow: none;
}

/* NEW class for the cut-corner effect */
.widget-cut-corners {
  /* This CSS property "cuts" the shape of the element */
  clip-path: polygon(15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%, 0 15px);
}

/* We remove the old ::before and ::after for a cleaner look that works with clip-path */
.widget-container::before,
.widget-container::after {
  content: none;
}

/* Disable hover effects on chart bars while keeping tooltips */
.no-hover .recharts-bar-rectangle:hover {
  fill-opacity: 1 !important;
  filter: none !important;
}

.no-hover .recharts-active-bar {
  fill-opacity: 1 !important;
  filter: none !important;
}

/* Override Tailwind backdrop blur utilities to reflect --glass-blur */
.backdrop-blur,
.backdrop-blur-sm,
.backdrop-blur-md,
.backdrop-blur-lg,
.backdrop-blur-xl,
.backdrop-blur-2xl {
  backdrop-filter: blur(var(--glass-blur, 8px)) !important;
  -webkit-backdrop-filter: blur(var(--glass-blur, 8px)) !important;
}

/* --- Toast Notification Animations --- */
@keyframes toast-enter {
  0% {
    opacity: 0;
    transform: translateY(-6px) scale(0.92) rotateX(25deg);
    filter: brightness(0.6);
  }
  55% {
    opacity: 1;
    transform: translateY(2px) scale(1.02) rotateX(0deg);
    filter: brightness(1);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1) rotateX(0deg);
  }
}
@keyframes toast-exit {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(4px) scale(0.95);
  }
}
@keyframes toast-pulse-glow {
  0%,
  100% {
    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.08);
  }
  50% {
    box-shadow: 0 0 0 6px rgba(255, 255, 255, 0);
  }
}
@keyframes toast-bar-flow {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 200% 50%;
  }
}
@keyframes toast-sparkle {
  0% {
    opacity: 0;
    transform: translate(0, 0) scale(0.4);
  }
  30% {
    opacity: 0.9;
    transform: translate(-6px, -4px) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(-16px, -10px) scale(0.2);
  }
}

.toast-pop {
  animation: toast-enter 0.55s cubic-bezier(0.16, 0.8, 0.3, 1);
}
.toast-fading {
  animation: toast-exit 0.4s ease forwards;
}
.toast-accent {
  background: linear-gradient(140deg, var(--color-primary) 0%, var(--color-secondary) 50%, var(--color-tertiary) 100%);
  background-size: 200% 200%;
  animation: toast-bar-flow 3s linear infinite;
}
.toast-glow {
  position: relative;
}
.toast-glow::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: radial-gradient(circle at 25% 20%, rgba(255, 255, 255, 0.35), transparent 60%);
  mix-blend-mode: overlay;
  opacity: 0.4;
}
.toast-glow::after {
  content: "";
  position: absolute;
  right: 4px;
  top: 6px;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: radial-gradient(circle, #fff, rgba(255, 255, 255, 0));
  animation: toast-sparkle 2.2s ease-out infinite;
}
